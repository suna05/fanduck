"use strict";chrome.runtime.onInstalled.addListener(function(){});chrome.app.runtime.onLaunched.addListener(function(){chrome.app.window.create("index.html",{id:"send-anywhere",resizable:true,innerBounds:{minWidth:550,minHeight:370,maxWidth:551,maxHeight:371}});chrome.identity.getProfileUserInfo(function(userInfo){var data={deviceInfo:{}};if(userInfo.id.length>0){data.deviceInfo.device_uid=userInfo.id}chrome.gcm.register(["653965100321"],function(registrationId){if(registrationId){data.deviceInfo.push_id=registrationId}chrome.storage.sync.set(data,function(){})})})});chrome.runtime.onSuspend.addListener(function(){});var push_data={};chrome.gcm.onMessage.addListener(function(message){var data=message.data;push_data=data;chrome.notifications.create("",{type:"basic",title:chrome.i18n.getMessage("gcm_push_title"),message:chrome.i18n.getMessage("gcm_push_desc"),iconUrl:"/css/images/desktop_noti.jpg"},function(id){var sa_app=chrome.app.window.get("send-anywhere");if(sa_app){sa_app.contentWindow.postMessage(data,"*")}})});chrome.notifications.onClicked.addListener(function(id){chrome.notifications.clear(id,function(isCleared){if(chrome.app.window.get("send-anywhere")){openApp()}else{openApp(push_data)}})});var openApp=function(data){chrome.app.window.create("index.html",{id:"send-anywhere",resizable:true,innerBounds:{minWidth:550,minHeight:370,maxWidth:551,maxHeight:371}},function(win){if(data){setTimeout(function(){win.contentWindow.postMessage(data,"*")},500)}})};