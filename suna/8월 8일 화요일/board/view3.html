<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FanDuck</title>
<link rel="stylesheet"
	href="../../node_modules/bootstrap/dist/css/bootstrap.min.css"
	type="text/css">
<link rel="stylesheet" href="../../css/mypage_miya_edit.css"
	type="text/css">
<link rel="stylesheet" href="../../css/menu_miya_edit.css" />
<link rel="stylesheet" href="../../css/style_miya_edit.css" />
<link rel="stylesheet" href="../../css/footer.css" />
<link rel="stylesheet" href="../../node_modules/blueimp-file-upload/css/jquery.fileupload.css">
<script src="../../node_modules/jquery/dist/jquery.min.js"></script>

</head>
<body>

	<div class="container">
		<header class="hheader">
			<div id="logo" style="display: inline-block">
				<a class="ha" href="index.html"><img class="himg"
					src="../../images/logo1.png" /></a> <span id="menu">
					<ul class="hul">
						<li class="hli"><a href="index4.html" class="ha" id="1"
							style="color: black; cursor: pointer">홈</a></li>
						<li class="hli" style="color: black" data-toggle="modal"
							data-target="#join"><a class="ha" id="2"
							style="color: black; cursor: pointer">프로필</a></li>
						<li class="hli"><button id="logout" class="btn btn-default"
								style="background-color: #fa507b; color: white; margin-bottom: 5px; right: 0px;"
								data-toggle="modal" data-target="#login">로그아웃</button></li>
						<a style="float: right; font-size: 175%; padding-left: 10px; color: black;"
							data-toggle="modal" data-target="#mypage">
							<span	class="glyphicon glyphicon-cog" aria-hidden="true"></span>
						</a>
					</ul>
				</span>


			</div>


		</header>


		<!-- 회원:마이페이지 -->
		<div class="modal fade" id="mypage" tabindex="-1" role="dialog"
			aria-labelledby="myModalLabel" aria-hidden="true"
			style="position: center;">
			<div class="modal-dialog joinmodal">
				<div class="modal-content"
					style="width: 60%; height: 95%; position: center;">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">
							<span aria-hidden="true">×</span><span class="sr-only">Close</span>
						</button>
						<h4 class="modal-title" id="myModalLabel"
							style="text-align: center">
							<b>내 정보 변경</b>
						</h4>
					</div>

					<div class="modal-body">
						<div style="vertical-align: top; width: 130%;">
							<div style="text-align: center; padding-top: 3%;">

								<form class="form-horizontal">
									<div class="form-group">
										<label for="inputEmail3" class="col-sm-3 control-label">닉네임</label>
										<div class="col-sm-6">
											<input type="email" class="form-control"
												id="inputNick_change" placeholder="변경할 닉네임">
										</div>
									</div>
									<div class="form-group">
										<label for="inputPassword3" class="col-sm-3 control-label">비밀번호</label>
										<div class="col-sm-6">
											<input type="password" class="form-control"
												id="inputPassword_change" placeholder="변경할 비밀번호">
										</div>
									</div>
									<div class="form-group">
										<label for="inputPassword3" class="col-sm-3 control-label">비밀번호확인</label>
										<div class="col-sm-6">
											<input type="password" class="form-control"
												id="inputPassword_change" placeholder="변경할 비밀번호 확인">
										</div>
									</div>


								</form>

							</div>



						</div>
					</div>


					<div class="modal-footer" style="bottom: 2%;">
						<button type="button" class="btn btn-default"
							style="background-color: #fa507b; color: white;"
							data-dismiss="modal">취소</button>
						<button type="button" class="btn btn-default"
							style="background-color: #fa507b; color: white;">저장</button>
					</div>
				</div>
			</div>
		</div>
		<!--  end of header -->


		<div class="outer-wrapper">


			<section class="top">
				<a href="board.html" class="btn btn-info">목록</a>
				<button type="button" class="btn btn-info bit-new" id="add-btn">추가</button>
				<a><span class="glyphicon glyphicon-chevron-left"></span></a> <span
					class="post_option_page">312/333</span> <a><span
					class="glyphicon glyphicon-chevron-right"></span></a>
			</section>
			<!-- 상단 -->


			<form class="form-horizontal">

<!-- 				<div class="form-group bit-view">
    <label class="col-sm-2 control-label">번호</label>
    <div class="col-sm-10">
      <p class="form-control-static" id="fi-BdNo"></p>
    </div>
  </div>  -->

				<div class="form-group">
					<label for="fi-title"></label>
					<div class="col-sm-7">
						<h1>
							<input type="text" id="fi-title"
								style="border: 0px; margin-top: 5%; width:150%;" placeholder="제목">
						</h1>
					</div>
				</div>


				<div class="form-group">
					<label for="fi-date"></label>
					<div class="col-sm-7">
						<input type="text" id="fi-date" style="border: 0px;"
							placeholder="등록일">
					</div>
				</div>



				<div class="form-group">
	
					<label for="fi-content"></label>
					<div class="col-sm-11">						
						<textarea rows="15" cols="150" id="fi-content" style="border: 0px;">
						</textarea>
					</div>
				</div>
				

				
		사진: <input id="fileupload" type="file" name="files" multiple><br>
		<button id='upload-btn' type='button'>등록</button>
		<div id='images-div'></div>

			</form>

			<span style="float: right;">공유하기 &nbsp; </span>
		</div>

		<section class="post_detail"></section>

		<div class="bottom">
			<!-- <a id="del-btn">삭제하기</a> &nbsp;&nbsp; <a>수정하기</a> -->
			<button type="button" class="btn btn-primary bit-view" id="upd-btn">변경</button>
			<button type="button" class="btn btn-primary bit-view" id="del-btn">삭제</button>
		</div>

		<footer id="footer">
			<script>
				$("#footer").load("../footer.html");
			</script>
		</footer>


		<script src="../../node_modules/jquery/dist/jquery.min.js"></script>
		<script
			src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
		<script
			src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
		<script src="../../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="../../node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"></script>
<script src="../../node_modules/blueimp-load-image/js/load-image.all.min.js"></script>
<script src="../../node_modules/blueimp-canvas-to-blob/js/canvas-to-blob.js"></script>
<script src="../../node_modules/bootstrap/dist/js/bootstrap.js"></script>
<script src="../../node_modules/blueimp-file-upload/js/jquery.iframe-transport.js"></script>
<script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload.js"></script>
<script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload-process.js"></script> 
<script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload-image.js"></script> 
		<script src="../../js/view.js"></script>
		<script>
$('#fileupload').fileupload({
  url: 'upload.json',        // 서버에 요청할 URL
  dataType: 'json',         // 서버가 보낸 응답이 JSON임을 지정하기
  sequentialUploads: true,  // 여러 개의 파일을 업로드 할 때 순서대로 요청하기.
  singleFileUploads: false, // 한 요청에 여러 개의 파일을 전송시키기.
  autoUpload: true,        // 파일을 추가할 때 자동 업로딩 하지 않도록 설정.
  disableImageResize: /Android(?!.*Chrome)|Opera/
        .test(window.navigator && navigator.userAgent), // 안드로이드와 오페라 브라우저는 크기 조정 비활성 시키기
  previewMaxWidth: 100,   // 미리보기 이미지 너비
  previewMaxHeight: 100,  // 미리보기 이미지 높이 
  previewCrop: true,      // 미리보기 이미지를 출력할 때 원본에서 지정된 크기로 자르기
  processalways: function(e, data) {
      console.log('fileuploadprocessalways()...');
      console.log(data.files);
      var imagesDiv = $('#images-div');
      imagesDiv.html("");
      for (var i = 0; i < data.files.length; i++) {
        try {
          if (data.files[i].preview.toDataURL) {
            $("<img>").attr('src', data.files[i].preview.toDataURL()).css('width', '100px').appendTo(imagesDiv);
          }
        } catch (err) {}
      }
      $('#upload-btn').unbind("click");
      $('#upload-btn').click(function() {
          data.submit();
      });
  }, 
  submit: function (e, data) { // 서버에 전송하기 직전에 호출된다.
    console.log('submit()...');
//  console.log(data.files[0].name)
    data.formData = {
        title: $('#fiTitle').val(),
        date: $('#fiRegister').val(),
        content : $('#fi-content').val()
        //filepath: 'board/upload' + data.files[0].name
        
    };
  }, 
  done: function (e, data) { // 서버에서 응답이 오면 호출된다. 각 파일 별로 호출된다.
  	
    console.log('done()...');

    console.log(data.result.fileList[0].filename);
    console.log(data.result.fileList[1].filename);
    console.log(data.result.fileList[2].filename);
    $.post('add.json', {
    	'bdNo' : fiBdNo.val(),
//    'mNo' : "1",
//    'mpNo' : "9",
    	'bdTitle': fiTitle.val(),
      'bdContent': fiContent.val(),
      'bdRegister': fiDate.val(),
      'bdPhoto' : fiPhoto.val()
    }, function(result) {
//    	$.getJSON('list.json', {
//    		'bdNo' : bdNo,
//    		'bdPhoto' : 
//    	})
      //location.href = 'board.html'
    }, 'json')
 

    console.log(data.result.title)
    var file = data.result.fileList[0];
//    $('<p/>').text("title : " + data.result.title).appendTo(document.body);
//    $('<p/>').text("date : " + data.result.date).appendTo(document.body);
//    $('<p/>').text("content : " + data.result.content).appendTo(document.body);
  
    $.each(data.result.fileList, function(index, file) {
    	
      $('<p/>').text(file.filename + " : " + file.filesize).appendTo(document.body);
    });
  }
});
</script>
		
		
</body>



</html>